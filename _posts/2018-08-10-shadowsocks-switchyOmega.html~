---
layout: post
title: Shadowsocks+SwitchyOmega
author: zrg
comments: false
description: As we all know, the walls of the continent have been very high. As a developer, "prison Break"(or "Over the wall") is necessary skill, at least of now. This article focuses on how to cross the maninland of China through shadowsocks to visit the outside world.
categories:
- network
tags:
- shadowsocks
- SwitchyOmega
photos:
---

<pre class="example">
This article is for communication only, please do not use for business! The author of this article is not responsible for any consequences. thanks for your attention!
本文内容仅作交流学习之用，请勿用于商业！如造成任何后果，本文作者概不负责。谢谢您的关注！

</pre>

<div class="org-center">
<p>
If you have questions, please send email to zrg1390556487@gmail.com.
</p>
</div>

<div id="outline-container-orgbe6428f" class="outline-2">
<h2 id="orgbe6428f">Server</h2>
<div class="outline-text-2" id="text-orgbe6428f">
</div>
<div id="outline-container-org8268bb7" class="outline-3">
<h3 id="org8268bb7">To buy server or to register shadowsocks.</h3>
<div class="outline-text-3" id="text-org8268bb7">
<pre class="example">
"搬瓦工"
https://shadowsocks.com

</pre>
</div>
</div>
<div id="outline-container-org4b16e83" class="outline-3">
<h3 id="org4b16e83">Installing and Configuring</h3>
<div class="outline-text-3" id="text-org4b16e83">
</div>
<div id="outline-container-orgeedb396" class="outline-4">
<h4 id="orgeedb396">Installing pip</h4>
<div class="outline-text-4" id="text-orgeedb396">
<pre class="example">
#yum install python-pip

</pre>
<p>
or
</p>
<pre class="example">
#curl "https://bootstrap.pypa.io/get-pip.py" -o "get-pip.py"
#python get-pip.py
#pip install --upgrade pip

</pre>
</div>
</div>
<div id="outline-container-org4b2c64d" class="outline-4">
<h4 id="org4b2c64d">Installing shadowsocks</h4>
<div class="outline-text-4" id="text-org4b2c64d">
<pre class="example">
#pip install shadowsocks
#vim /etc/shadowsocks.json

</pre>
<div class="org-src-container">
<pre class="src src-emacs-lisp">{
  <span style="color: #5c3566;">"server"</span>: <span style="color: #5c3566;">"server_ip"</span>,//server ip address
  <span style="color: #5c3566;">"server_port"</span>: 8388,//server port
  <span style="color: #5c3566;">"local_address"</span>:<span style="color: #5c3566;">"127.0.0.1"</span>,//local address
  <span style="color: #5c3566;">"local_port"</span><span style="color: #75507b;">:1080</span>,//local port
  <span style="color: #5c3566;">"password"</span>: <span style="color: #5c3566;">"password"</span>,//password
  <span style="color: #5c3566;">"method"</span>: <span style="color: #5c3566;">"aes-256-cfb"</span>,//encryption
  <span style="color: #5c3566;">"timeout"</span><span style="color: #75507b;">:600</span> //timeout
}
</pre>
</div>
<p>
explanation: 
</p>
<pre class="example">
server:server ip address
server_port:server port
password:use 

</pre>
<p>
<a href="http://ucdok.com/project/generate_password.html">password tool</a>
</p>
<pre class="example">
method:aes-128-cfb, aes-192-cfb, aes-256-cfb, bf-cfb, cast5-cfb, des-cfb, rc4-md5, chacha20, salsa20, rc4, table

</pre>
</div>
</div>
<div id="outline-container-org08e3ac5" class="outline-4">
<h4 id="org08e3ac5">Configuring auto-start</h4>
<div class="outline-text-4" id="text-org08e3ac5">
<pre class="example">
#vim /etc/systemd/system/shadowsocks.service

</pre>
<div class="org-src-container">
<pre class="src src-emacs-lisp">[Unit]
Description=Shadowsocks

[Service]
TimeoutStartSec=0
ExecStart=/usr/bin/ssserver -c /etc/shadowsocks.json

[Install]
WantedBy=multi-user.target
</pre>
</div>
<pre class="example">
Start shadowsocks
#systemctl enable shadowsocks
#systemctl start shadowsocks
#systemctl status shadowsocks -l

</pre>
</div>
</div>
<div id="outline-container-org4fa10d9" class="outline-4">
<h4 id="org4fa10d9">Install Script</h4>
<div class="outline-text-4" id="text-org4fa10d9">
<pre class="example">
$vim install-shadowsocks.sh, content of file from 

</pre>
<p>
<a href="https://github.com/zhaorengui/article/blob/master/network/install-shadowsocks.sh">install shadow</a>
</p>
<pre class="example">
#chmod +x install-shadowsocks.sh
#./install-shadowsocks.sh

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6f1d666" class="outline-2">
<h2 id="org6f1d666">Client</h2>
<div class="outline-text-2" id="text-org6f1d666">
</div>
<div id="outline-container-orgbf44847" class="outline-3">
<h3 id="orgbf44847">Linux</h3>
<div class="outline-text-3" id="text-orgbf44847">
</div>
<div id="outline-container-orgb437e78" class="outline-4">
<h4 id="orgb437e78">Install And Use Shadowsocks Command Line Client on Linux</h4>
<div class="outline-text-4" id="text-orgb437e78">
<p>
1.Linux series
</p>
<pre class="example">
Debian/Ubuntu:
$sudo apt-get install python-pip
$sudo pip install shadowsocks

</pre>

<pre class="example">
Fedora/Centos:
$sudo yum install python-setuptools   or   sudo dnf install python-setuptools
$sudo easy_install pip
$sudo pip install shadowsocks

</pre>

<pre class="example">
OpenSUSE:
$sudo zypper install python-pip
$sudo pip install shadowsocks

</pre>

<pre class="example">
Archlinux:
$sudo pacman -S python-pip
sudo pip install shadowsocks

</pre>

<pre class="example">
sslocal is the client software and ssserver is the server software. On some Linux distros 
such as ubuntu, the shadowsocks client sslocal is installed under /usr/local/bin. 
On Others such as Arch sslocal is installed under /usr/bin/. Your can use whereis command
to find the exact location.
user@debian:~$ whereis sslocal
sslocal: /usr/local/bin/sslocal

</pre>
<p>
2.vim /etc/shadowsocks.json
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">{
<span style="color: #5c3566;">"server"</span>:<span style="color: #5c3566;">"server-ip"</span>,
<span style="color: #5c3566;">"server_port"</span><span style="color: #75507b;">:8000</span>,
<span style="color: #5c3566;">"local_address"</span>: <span style="color: #5c3566;">"127.0.0.1"</span>,
<span style="color: #5c3566;">"local_port"</span><span style="color: #75507b;">:1080</span>,
<span style="color: #5c3566;">"password"</span>:<span style="color: #5c3566;">"your-password"</span>,
<span style="color: #5c3566;">"timeout"</span><span style="color: #75507b;">:600</span>,
<span style="color: #5c3566;">"method"</span>:<span style="color: #5c3566;">"aes-256-cfb"</span>
}
</pre>
</div>
<pre class="example">
$sudo sslocal -c /etc/shadowsocks.json

</pre>

<pre class="example">
To run in the background
$sudo sslocal -c /etc/shadowsocks.json -d start

</pre>

<pre class="example">
Auto Start the Client on System Boot
$sudo vi /etc/rc.local

</pre>
<div class="org-src-container">
<pre class="src src-emacs-lisp">sudo sslocal -c /etc/shadowsocks.json -d start
</pre>
</div>

<pre class="example">
Check if It Works
#sudo systemctl status rc-local.service

</pre>
</div>
</div>
<div id="outline-container-org26b34a3" class="outline-4">
<h4 id="org26b34a3">Problem</h4>
<div class="outline-text-4" id="text-org26b34a3">
<pre class="example">
ShadowSocks start error: undefined symbol EVP_CIPHER_CTX_cleanup

</pre>
<p>
Solving:
</p>
<pre class="example">
vim /usr/local/lib/python3.5/dist-packages/shadowsocks/crypto/openssl.py

</pre>

<pre class="example">
VIM Command：
:%s/cleanup/reset/
:x

</pre>
<p>
Reason:
</p>
<pre class="example">
openssl 1.1.0 "EVP_CIPHER_CTX_cleanup" is old.

</pre>
</div>
</div>
</div>
<div id="outline-container-org65214c5" class="outline-3">
<h3 id="org65214c5">Windows</h3>
<div class="outline-text-3" id="text-org65214c5">
</div>
<div id="outline-container-orgd7fb327" class="outline-4">
<h4 id="orgd7fb327">Dowload win-client</h4>
<div class="outline-text-4" id="text-orgd7fb327">
<p>
<a href="https://softs.pw/?dir=%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/PC/Shadowsocks">Dowload1</a>
<a href="http://pan.baidu.com/s/1miLpEkS">Dowload2</a> 密码：jnfr
</p>
</div>
</div>
<div id="outline-container-orgce68918" class="outline-4">
<h4 id="orgce68918">Configure</h4>
<div class="outline-text-4" id="text-orgce68918">
<pre class="example">
1.unzip

</pre>

<div class="figure">
<p><img src="../../../../../assets/images/shadowsocks-20170123111438.png" alt="shadowsocks-20170123111438.png" />
</p>
</div>
<pre class="example">
2.running

</pre>

<div class="figure">
<p><img src="../../../../../assets/images/shadowsocks-20170123111902.png" alt="shadowsocks-20170123111902.png" />
</p>
</div>


<div class="figure">
<p><img src="../../../../../assets/images/shadowsocks-20170123111953.png" alt="shadowsocks-20170123111953.png" />
</p>
</div>
<pre class="example">
3.proxy

</pre>

<div class="figure">
<p><img src="../../../../../assets/images/shadowsocks-20170123112126.png" alt="shadowsocks-20170123112126.png" />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeda5aa2" class="outline-3">
<h3 id="orgeda5aa2">Android</h3>
<div class="outline-text-3" id="text-orgeda5aa2">
<pre class="example">
Download

</pre>
<p>
<a href="http://pan.baidu.com/s/1nuXO9KX">apk</a> 5n8v
</p>


<div class="figure">
<p><img src="../../../../../assets/images/shadowsocks-20170123141118.png" alt="shadowsocks-20170123141118.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-orgd531d72" class="outline-3">
<h3 id="orgd531d72">IOS</h3>
</div>
<div id="outline-container-org6db51e9" class="outline-3">
<h3 id="org6db51e9">Mac OS X</h3>
</div>
</div>
<div id="outline-container-org73d17b2" class="outline-2">
<h2 id="org73d17b2">SwitchyOmega</h2>
<div class="outline-text-2" id="text-org73d17b2">
</div>
<div id="outline-container-orga6dde74" class="outline-3">
<h3 id="orga6dde74">Add SwitchyOmega plugin</h3>
<div class="outline-text-3" id="text-orga6dde74">
<p>
<a href="https://github.com/FelisCatus/SwitchyOmega/releases/">Dowload Address</a>
</p>
</div>
</div>
<div id="outline-container-org786106c" class="outline-3">
<h3 id="org786106c">Configure SwitchyOmega</h3>
<div class="outline-text-3" id="text-org786106c">
<p>
1.setting proxy
2.auto switch
</p>
<pre class="example">
Add rule.

</pre>
<p>
3.rule list setting
</p>
<pre class="example">
rule:http://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt
or
https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt

</pre>
</div>
</div>
</div>
<div id="outline-container-org1abccc1" class="outline-2">
<h2 id="org1abccc1">Reference</h2>
<div class="outline-text-2" id="text-org1abccc1">
<pre class="example">
https://zh.wikipedia.org/zh-hans/Shadowsocks
https://shadowsocks.com
http://shadowsocks.org/
http://morning.work/page/2015-12/install-shadowsocks-on-centos-7.html
https://www.linuxbabe.com/desktop-linux/how-to-install-and-use-shadowsocks-command-line-client
https://doub.io/ss-jc10/
https://kionf.com/2016/12/15/errornote-ss/
https://github.com/FelisCatus/SwitchyOmega/wiki/GFWList

</pre>
</div>
</div>
