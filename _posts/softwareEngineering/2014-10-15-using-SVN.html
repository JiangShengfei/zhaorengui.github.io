---
layout: post
title: Install SVN in Linux
author: zrg
comments: false
description: I have always been fascinated website development.So,management and back up of code is very important. Last night, installed successfully SVN on linux. In fack,I have tried before,but did not write a decent note.Summarized today.
categories:
- Software
tags:
- SVN
photos:
---

<div class="org-center">
<p>
If you have questions, please send email to zrg1390556487@gmail.com.
</p>
</div>

<div id="outline-container-org288adb9" class="outline-2">
<h2 id="org288adb9">Installation environment</h2>
<div class="outline-text-2" id="text-org288adb9">
<pre class="example">
Linux kernel version: 3.10.0 
OS: CentOS 7
software: subversion

</pre>
</div>
</div>
<div id="outline-container-org3fe2bb7" class="outline-2">
<h2 id="org3fe2bb7">Install</h2>
<div class="outline-text-2" id="text-org3fe2bb7">
</div>
<div id="outline-container-org98ee3e9" class="outline-3">
<h3 id="org98ee3e9">First Method:source package install</h3>
<div class="outline-text-3" id="text-org98ee3e9">
</div>
<div id="outline-container-orge21c3e1" class="outline-4">
<h4 id="orge21c3e1">Download and decompression</h4>
<div class="outline-text-4" id="text-orge21c3e1">
<pre class="example">
Official Site: https://www.visualsvn.com
Dowload:
        1. wget http://subversion.tigris.org/downloads/subversion-1.6.1.tar.gz
        2. wget http://subversion.tigris.org/downloads/subversion-deps-1.6.1.tar.gz
Decompression command:
        tar zxvf subversion-1.6.1.tar.gz
        tar zxvf subversion-deps-1.6.1.tar.gz

</pre>
</div>
</div>
<div id="outline-container-org960f62e" class="outline-4">
<h4 id="org960f62e">Compile and install</h4>
<div class="outline-text-4" id="text-org960f62e">
<pre class="example">
Command:
        ./configure --prefix=/usr/local/svn/
        make &amp;&amp; make install

</pre>
</div>
</div>
<div id="outline-container-org9ef4c8c" class="outline-4">
<h4 id="org9ef4c8c">Add command of svn to path</h4>
<div class="outline-text-4" id="text-org9ef4c8c">
<pre class="example">
Comand:
       echo "export PATH=$PATH:/usr/local/svn/bin/" &gt;&gt; /etc/profile
       source /etc/profile


</pre>
</div>
</div>
</div>
<div id="outline-container-orgdb7409c" class="outline-3">
<h3 id="orgdb7409c">Second Method:yum install</h3>
<div class="outline-text-3" id="text-orgdb7409c">
<pre class="example">
yum install subversion mod_dav_svn

</pre>
</div>
</div>
</div>
<div id="outline-container-orgc389b2b" class="outline-2">
<h2 id="orgc389b2b">Build warehouse of test</h2>
<div class="outline-text-2" id="text-orgc389b2b">
</div>
<div id="outline-container-orgeb2efe0" class="outline-3">
<h3 id="orgeb2efe0">Build root directory of svn</h3>
<div class="outline-text-3" id="text-orgeb2efe0">
<pre class="example">
mkdir -p /opt/svn

</pre>
</div>
</div>
<div id="outline-container-org2397e41" class="outline-3">
<h3 id="org2397e41">Build warehoust of test</h3>
<div class="outline-text-3" id="text-org2397e41">
<pre class="example">
mkdir -p /opt/svn/svntest/
svnadmin create /opt/svn/svntest/

</pre>
</div>
</div>
<div id="outline-container-org6381aa4" class="outline-3">
<h3 id="org6381aa4">Configure</h3>
<div class="outline-text-3" id="text-org6381aa4">
<pre class="example">
1.To directory of configure,There are three file here.
   cd /opt/svn/svntest/conf/
authz: Configure file about setting permissions of users.
passwd:  Configure file about setting username and password.
svnserve.conf: Configure file about svn.
2.svnserve.conf
vim svnserve.conf
edit:
     [general]
     anon-access = none
     auth-access = write
     password-db = passwd
     authz-db = authz
3.authz
add:
    [svntest:/]
    92csz.com = rw # add a user(92csz.com),read and write.
4.passwd
edit:
    92csz.com = 123456 # password is 123456


</pre>
</div>
</div>
</div>
<div id="outline-container-org2acc69e" class="outline-2">
<h2 id="org2acc69e">Client</h2>
<div class="outline-text-2" id="text-org2acc69e">
<pre class="example">
This is windows client.


</pre>
</div>
</div>
<div id="outline-container-org6eb21ef" class="outline-2">
<h2 id="org6eb21ef">Start</h2>
<div class="outline-text-2" id="text-org6eb21ef">
</div>
<div id="outline-container-orgd274bea" class="outline-3">
<h3 id="orgd274bea">Start service of SVN</h3>
<div class="outline-text-3" id="text-orgd274bea">
<pre class="example">
svnserve -d -r /opt/svn/

</pre>
</div>
</div>
<div id="outline-container-org17547fe" class="outline-3">
<h3 id="org17547fe">Check service</h3>
<div class="outline-text-3" id="text-org17547fe">
<pre class="example">
netstat -aux |grep svn
restult:
        tcp 000.0.0.0:3690.0.0.0:*  LISTEN  8646/svnserve


</pre>
</div>
</div>
</div>
<div id="outline-container-org6320c12" class="outline-2">
<h2 id="org6320c12">Change permission of user</h2>
<div class="outline-text-2" id="text-org6320c12">
<pre class="example">
Command:
        chmod -R 775 /opt/svn/
 or     chmod -R o+rw /opt/svn


</pre>
</div>
</div>
<div id="outline-container-orge6eb589" class="outline-2">
<h2 id="orge6eb589">Test by client</h2>
<div class="outline-text-2" id="text-orge6eb589">
<pre class="example">
Open svn client(right),Enter IP address of svn server and warehouse name
exmple:
       svn://192.168.120.166/svntest


</pre>
</div>
</div>
<div id="outline-container-org3e94751" class="outline-2">
<h2 id="org3e94751">Apache and Subversion</h2>
<div class="outline-text-2" id="text-org3e94751">
</div>
<div id="outline-container-org35eb2cd" class="outline-3">
<h3 id="org35eb2cd">Add this config file to apache</h3>
<div class="outline-text-3" id="text-org35eb2cd">
<div class="org-src-container">
<pre class="src src-emacs_lisp">LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

&lt;Location /svn&gt;
   DAV svn
   SVNParentPath /var/www/unixmensvn
   AuthType Basic
   AuthName "Subversion repositories"
   AuthUserFile /etc/svn-auth-users
   Require valid-user
&lt;/Location&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd868b19" class="outline-3">
<h3 id="orgd868b19">Create SVN users</h3>
<div class="outline-text-3" id="text-orgd868b19">
<pre class="example">
htpasswd -cm /etc/svn-auth-users testuser1

</pre>
</div>
</div>
<div id="outline-container-org8bec05e" class="outline-3">
<h3 id="org8bec05e">Create and configure SVN repository</h3>
<div class="outline-text-3" id="text-org8bec05e">
<pre class="example">
mkdir /var/www/unixmensvn
cd  /var/www/unixmensvn
svnadmin create repo
chown -R apache.apache repo

# If you still have issues with SELinux Security please apply this: 
chcon -R -t httpd_sys_content_t /var/www/unixmensvn/repo
chcon -R -t httpd_sys_rw_content_t /var/www/unixmensvn/repo

</pre>
</div>
</div>
<div id="outline-container-org722b8b4" class="outline-3">
<h3 id="org722b8b4">You can open the http and https on the file with thi way</h3>
<div class="outline-text-3" id="text-org722b8b4">
<pre class="example">
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --permanent --zone=public --add-service=https
firewall-cmd --reload

</pre>
</div>
</div>
<div id="outline-container-org8d1cbde" class="outline-3">
<h3 id="org8d1cbde">Make trunk, branches and tags structure under repo</h3>
<div class="outline-text-3" id="text-org8d1cbde">
<pre class="example">
mkdir -p /tmp/svn-structure-template/{trunk,branches,tags}

svn import -m "Initial repository" /tmp/svn-structure-template   file:///var/www/unixmensvn/repo/
Adding         /tmp/svn-structure-template/branches
Adding         /tmp/svn-structure-template/tags
Adding         /tmp/svn-structure-template/trunk

</pre>
<p>
Committed revision 1.
</p>

<p>
Done!
</p>
</div>
</div>
</div>
<div id="outline-container-orgda1b093" class="outline-2">
<h2 id="orgda1b093">Question</h2>
<div class="outline-text-2" id="text-orgda1b093">
</div>
<div id="outline-container-orge524783" class="outline-3">
<h3 id="orge524783">问题1</h3>
<div class="outline-text-3" id="text-orge524783">
<pre class="example">
1.svn: Can’t open file ‘***/txn-current-lock’: Permission denied
Solve:
      Severth(Vew 7th section).

</pre>
</div>
</div>
<div id="outline-container-orgbcbee10" class="outline-3">
<h3 id="orgbcbee10">问题2</h3>
<div class="outline-text-3" id="text-orgbcbee10">
<pre class="example">
2.Happen "authorization failed" error client
Solve:
      Check configure.
### Evey establishment of a lirary need to be configured.This is very important.

</pre>
</div>
</div>
<div id="outline-container-org725fade" class="outline-3">
<h3 id="org725fade">问题3</h3>
<div class="outline-text-3" id="text-org725fade">
<pre class="example">
3.When committing,error:
         post commit FS processing had error:
         "sqlite:attempt to write a readonly database"
Solve:
      into /opt/svn/wp-job/db , there is a file "rep-cache.db"
chown -R zrg.zrggroup rep-cache.db

</pre>
</div>
</div>
</div>
