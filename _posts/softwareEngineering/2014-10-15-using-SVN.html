---
layout: post
title: Install SVN in Linux
author: zrg
comments: false
description: I have always been fascinated website development.So,management and back up of code is very important. Last night, installed successfully SVN on linux. In fack,I have tried before,but did not write a decent note.Summarized today.
categories:
- Software
tags:
- SVN
photos:
---

<div class="org-center">
<p>
If you have questions, please send email to zrg1390556487@gmail.com.
</p>
</div>

<div id="outline-container-org8967a9d" class="outline-2">
<h2 id="org8967a9d">Installation environment</h2>
<div class="outline-text-2" id="text-org8967a9d">
<pre class="example">
Linux kernel version: 3.10.0 
OS: CentOS 7
software: subversion

</pre>
</div>
</div>
<div id="outline-container-orgfa0cac1" class="outline-2">
<h2 id="orgfa0cac1">Install</h2>
<div class="outline-text-2" id="text-orgfa0cac1">
</div>
<div id="outline-container-orga87c496" class="outline-3">
<h3 id="orga87c496">First Method:source package install</h3>
<div class="outline-text-3" id="text-orga87c496">
</div>
<div id="outline-container-org7f3c132" class="outline-4">
<h4 id="org7f3c132">Download and decompression</h4>
<div class="outline-text-4" id="text-org7f3c132">
<pre class="example">
Official Site: https://www.visualsvn.com
Dowload:
        1. wget http://subversion.tigris.org/downloads/subversion-1.6.1.tar.gz
        2. wget http://subversion.tigris.org/downloads/subversion-deps-1.6.1.tar.gz
Decompression command:
        tar zxvf subversion-1.6.1.tar.gz
        tar zxvf subversion-deps-1.6.1.tar.gz

</pre>
</div>
</div>
<div id="outline-container-org0ac05bf" class="outline-4">
<h4 id="org0ac05bf">Compile and install</h4>
<div class="outline-text-4" id="text-org0ac05bf">
<pre class="example">
Command:
        ./configure --prefix=/usr/local/svn/
        make &amp;&amp; make install

</pre>
</div>
</div>
<div id="outline-container-org19a27df" class="outline-4">
<h4 id="org19a27df">Add command of svn to path</h4>
<div class="outline-text-4" id="text-org19a27df">
<pre class="example">
Comand:
       echo "export PATH=$PATH:/usr/local/svn/bin/" &gt;&gt; /etc/profile
       source /etc/profile


</pre>
</div>
</div>
</div>
<div id="outline-container-org8ed05e2" class="outline-3">
<h3 id="org8ed05e2">Second Method:yum install</h3>
<div class="outline-text-3" id="text-org8ed05e2">
<pre class="example">
yum install subversion mod_dav_svn

</pre>
</div>
</div>
</div>
<div id="outline-container-orgea42398" class="outline-2">
<h2 id="orgea42398">Build warehouse of test</h2>
<div class="outline-text-2" id="text-orgea42398">
</div>
<div id="outline-container-org806a934" class="outline-3">
<h3 id="org806a934">Build root directory of svn</h3>
<div class="outline-text-3" id="text-org806a934">
<pre class="example">
mkdir -p /opt/svn

</pre>
</div>
</div>
<div id="outline-container-org19f9d5c" class="outline-3">
<h3 id="org19f9d5c">Build warehoust of test</h3>
<div class="outline-text-3" id="text-org19f9d5c">
<pre class="example">
mkdir -p /opt/svn/svntest/
svnadmin create /opt/svn/svntest/

</pre>
</div>
</div>
<div id="outline-container-orgb2cff7a" class="outline-3">
<h3 id="orgb2cff7a">Configure</h3>
<div class="outline-text-3" id="text-orgb2cff7a">
<pre class="example">
1.To directory of configure,There are three file here.
   cd /opt/svn/svntest/conf/
authz: Configure file about setting permissions of users.
passwd:  Configure file about setting username and password.
svnserve.conf: Configure file about svn.
2.svnserve.conf
vim svnserve.conf
edit:
     [general]
     anon-access = none
     auth-access = write
     password-db = passwd
     authz-db = authz
3.authz
add:
    [svntest:/]
    92csz.com = rw # add a user(92csz.com),read and write.
4.passwd
edit:
    92csz.com = 123456 # password is 123456


</pre>
</div>
</div>
</div>
<div id="outline-container-orgb375d00" class="outline-2">
<h2 id="orgb375d00">Client</h2>
<div class="outline-text-2" id="text-orgb375d00">
<pre class="example">
This is windows client.


</pre>
</div>
</div>
<div id="outline-container-org204ac79" class="outline-2">
<h2 id="org204ac79">Start</h2>
<div class="outline-text-2" id="text-org204ac79">
</div>
<div id="outline-container-orgad246d0" class="outline-3">
<h3 id="orgad246d0">Start service of SVN</h3>
<div class="outline-text-3" id="text-orgad246d0">
<pre class="example">
svnserve -d -r /opt/svn/

</pre>
</div>
</div>
<div id="outline-container-orgf7aeaff" class="outline-3">
<h3 id="orgf7aeaff">Check service</h3>
<div class="outline-text-3" id="text-orgf7aeaff">
<pre class="example">
netstat -aux |grep svn
restult:
        tcp 000.0.0.0:3690.0.0.0:*  LISTEN  8646/svnserve


</pre>
</div>
</div>
</div>
<div id="outline-container-org39960dd" class="outline-2">
<h2 id="org39960dd">Change permission of user</h2>
<div class="outline-text-2" id="text-org39960dd">
<pre class="example">
Command:
        chmod -R 775 /opt/svn/
 or     chmod -R o+rw /opt/svn


</pre>
</div>
</div>
<div id="outline-container-org799537c" class="outline-2">
<h2 id="org799537c">Test by client</h2>
<div class="outline-text-2" id="text-org799537c">
<pre class="example">
Open svn client(right),Enter IP address of svn server and warehouse name
exmple:
       svn://192.168.120.166/svntest


</pre>
</div>
</div>
<div id="outline-container-orge3abcd6" class="outline-2">
<h2 id="orge3abcd6">Apache and Subversion</h2>
<div class="outline-text-2" id="text-orge3abcd6">
</div>
<div id="outline-container-org1bb37b9" class="outline-3">
<h3 id="org1bb37b9">Add this config file to apache</h3>
<div class="outline-text-3" id="text-org1bb37b9">
<div class="org-src-container">
<pre class="src src-emacs_lisp">LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

&lt;Location /svn&gt;
   DAV svn
   SVNParentPath /var/www/unixmensvn
   AuthType Basic
   AuthName "Subversion repositories"
   AuthUserFile /etc/svn-auth-users
   Require valid-user
&lt;/Location&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org237ec27" class="outline-3">
<h3 id="org237ec27">Create SVN users</h3>
<div class="outline-text-3" id="text-org237ec27">
<pre class="example">
htpasswd -cm /etc/svn-auth-users testuser1

</pre>
</div>
</div>
<div id="outline-container-orgecddb6b" class="outline-3">
<h3 id="orgecddb6b">Create and configure SVN repository</h3>
<div class="outline-text-3" id="text-orgecddb6b">
<pre class="example">
mkdir /var/www/unixmensvn
cd  /var/www/unixmensvn
svnadmin create repo
chown -R apache.apache repo

# If you still have issues with SELinux Security please apply this: 
chcon -R -t httpd_sys_content_t /var/www/unixmensvn/repo
chcon -R -t httpd_sys_rw_content_t /var/www/unixmensvn/repo

</pre>
</div>
</div>
<div id="outline-container-org5df4bc0" class="outline-3">
<h3 id="org5df4bc0">You can open the http and https on the file with thi way</h3>
<div class="outline-text-3" id="text-org5df4bc0">
<pre class="example">
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --permanent --zone=public --add-service=https
firewall-cmd --reload

</pre>
</div>
</div>
<div id="outline-container-org21fc34b" class="outline-3">
<h3 id="org21fc34b">Make trunk, branches and tags structure under repo</h3>
<div class="outline-text-3" id="text-org21fc34b">
<pre class="example">
mkdir -p /tmp/svn-structure-template/{trunk,branches,tags}

svn import -m "Initial repository" /tmp/svn-structure-template   file:///var/www/unixmensvn/repo/
Adding         /tmp/svn-structure-template/branches
Adding         /tmp/svn-structure-template/tags
Adding         /tmp/svn-structure-template/trunk

</pre>
<p>
Committed revision 1.
</p>

<p>
Done!
</p>
</div>
</div>
</div>
<div id="outline-container-orgac3df37" class="outline-2">
<h2 id="orgac3df37">Question</h2>
<div class="outline-text-2" id="text-orgac3df37">
</div>
<div id="outline-container-org138a472" class="outline-3">
<h3 id="org138a472">问题1</h3>
<div class="outline-text-3" id="text-org138a472">
<pre class="example">
1.svn: Can’t open file ‘***/txn-current-lock’: Permission denied
Solve:
      Severth(Vew 7th section).

</pre>
</div>
</div>
<div id="outline-container-orgfedeb4d" class="outline-3">
<h3 id="orgfedeb4d">问题2</h3>
<div class="outline-text-3" id="text-orgfedeb4d">
<pre class="example">
2.Happen "authorization failed" error client
Solve:
      Check configure.
### Evey establishment of a lirary need to be configured.This is very important.

</pre>
</div>
</div>
<div id="outline-container-org36f9cd5" class="outline-3">
<h3 id="org36f9cd5">问题3</h3>
<div class="outline-text-3" id="text-org36f9cd5">
<pre class="example">
3.When committing,error:
         post commit FS processing had error:
         "sqlite:attempt to write a readonly database"
Solve:
      into /opt/svn/wp-job/db , there is a file "rep-cache.db"
chown -R zrg.zrggroup rep-cache.db

</pre>
</div>
</div>
</div>
