---
layout: post
title: Install SVN in Linux
author: zrg
comments: false
description: I have always been fascinated website development.So,management and back up of code is very important. Last night, installed successfully SVN on linux. In fack,I have tried before,but did not write a decent note.Summarized today.
categories:
- Software
tags:
- SVN
photos:
---

<div class="org-center">
<p>
If you have questions, please send email to zrg1390556487@gmail.com.
</p>
</div>

<div id="outline-container-orgb8b9547" class="outline-2">
<h2 id="orgb8b9547">Installation environment</h2>
<div class="outline-text-2" id="text-orgb8b9547">
<pre class="example">
Linux kernel version: 3.10.0 
OS: CentOS 7
software: subversion

</pre>
</div>
</div>
<div id="outline-container-org07c84da" class="outline-2">
<h2 id="org07c84da">Install</h2>
<div class="outline-text-2" id="text-org07c84da">
</div>
<div id="outline-container-orgdb44a18" class="outline-3">
<h3 id="orgdb44a18">First Method:source package install</h3>
<div class="outline-text-3" id="text-orgdb44a18">
</div>
<div id="outline-container-org9249c90" class="outline-4">
<h4 id="org9249c90">Download and decompression</h4>
<div class="outline-text-4" id="text-org9249c90">
<pre class="example">
Official Site: https://www.visualsvn.com
Dowload:
        1. wget http://subversion.tigris.org/downloads/subversion-1.6.1.tar.gz
        2. wget http://subversion.tigris.org/downloads/subversion-deps-1.6.1.tar.gz
Decompression command:
        tar zxvf subversion-1.6.1.tar.gz
        tar zxvf subversion-deps-1.6.1.tar.gz

</pre>
</div>
</div>
<div id="outline-container-org2a65be9" class="outline-4">
<h4 id="org2a65be9">Compile and install</h4>
<div class="outline-text-4" id="text-org2a65be9">
<pre class="example">
Command:
        ./configure --prefix=/usr/local/svn/
        make &amp;&amp; make install

</pre>
</div>
</div>
<div id="outline-container-org2cfd673" class="outline-4">
<h4 id="org2cfd673">Add command of svn to path</h4>
<div class="outline-text-4" id="text-org2cfd673">
<pre class="example">
Comand:
       echo "export PATH=$PATH:/usr/local/svn/bin/" &gt;&gt; /etc/profile
       source /etc/profile


</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd24118" class="outline-3">
<h3 id="orgdd24118">Second Method:yum install</h3>
<div class="outline-text-3" id="text-orgdd24118">
<pre class="example">
yum install subversion mod_dav_svn

</pre>
</div>
</div>
</div>
<div id="outline-container-orgc11644d" class="outline-2">
<h2 id="orgc11644d">Build warehouse of test</h2>
<div class="outline-text-2" id="text-orgc11644d">
</div>
<div id="outline-container-org8f238c8" class="outline-3">
<h3 id="org8f238c8">Build root directory of svn</h3>
<div class="outline-text-3" id="text-org8f238c8">
<pre class="example">
mkdir -p /opt/svn

</pre>
</div>
</div>
<div id="outline-container-org7b07c17" class="outline-3">
<h3 id="org7b07c17">Build warehoust of test</h3>
<div class="outline-text-3" id="text-org7b07c17">
<pre class="example">
mkdir -p /opt/svn/svntest/
svnadmin create /opt/svn/svntest/

</pre>
</div>
</div>
<div id="outline-container-orgb86e27c" class="outline-3">
<h3 id="orgb86e27c">Configure</h3>
<div class="outline-text-3" id="text-orgb86e27c">
<pre class="example">
1.To directory of configure,There are three file here.
   cd /opt/svn/svntest/conf/
authz: Configure file about setting permissions of users.
passwd:  Configure file about setting username and password.
svnserve.conf: Configure file about svn.
2.svnserve.conf
vim svnserve.conf
edit:
     [general]
     anon-access = none
     auth-access = write
     password-db = passwd
     authz-db = authz
3.authz
add:
    [svntest:/]
    92csz.com = rw # add a user(92csz.com),read and write.
4.passwd
edit:
    92csz.com = 123456 # password is 123456


</pre>
</div>
</div>
</div>
<div id="outline-container-org7577e20" class="outline-2">
<h2 id="org7577e20">Client</h2>
<div class="outline-text-2" id="text-org7577e20">
<pre class="example">
This is windows client.


</pre>
</div>
</div>
<div id="outline-container-org35e548d" class="outline-2">
<h2 id="org35e548d">Start</h2>
<div class="outline-text-2" id="text-org35e548d">
</div>
<div id="outline-container-org1f1d1e2" class="outline-3">
<h3 id="org1f1d1e2">Start service of SVN</h3>
<div class="outline-text-3" id="text-org1f1d1e2">
<pre class="example">
svnserve -d -r /opt/svn/

</pre>
</div>
</div>
<div id="outline-container-orgb130b0c" class="outline-3">
<h3 id="orgb130b0c">Check service</h3>
<div class="outline-text-3" id="text-orgb130b0c">
<pre class="example">
netstat -aux |grep svn
restult:
        tcp 000.0.0.0:3690.0.0.0:*  LISTEN  8646/svnserve


</pre>
</div>
</div>
</div>
<div id="outline-container-org23bfbce" class="outline-2">
<h2 id="org23bfbce">Change permission of user</h2>
<div class="outline-text-2" id="text-org23bfbce">
<pre class="example">
Command:
        chmod -R 775 /opt/svn/
 or     chmod -R o+rw /opt/svn


</pre>
</div>
</div>
<div id="outline-container-org9953164" class="outline-2">
<h2 id="org9953164">Test by client</h2>
<div class="outline-text-2" id="text-org9953164">
<pre class="example">
Open svn client(right),Enter IP address of svn server and warehouse name
exmple:
       svn://192.168.120.166/svntest


</pre>
</div>
</div>
<div id="outline-container-orgdadff01" class="outline-2">
<h2 id="orgdadff01">Apache and Subversion</h2>
<div class="outline-text-2" id="text-orgdadff01">
</div>
<div id="outline-container-orgefe62be" class="outline-3">
<h3 id="orgefe62be">Add this config file to apache</h3>
<div class="outline-text-3" id="text-orgefe62be">
<div class="org-src-container">
<pre class="src src-emacs_lisp">LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

&lt;Location /svn&gt;
   DAV svn
   SVNParentPath /var/www/unixmensvn
   AuthType Basic
   AuthName "Subversion repositories"
   AuthUserFile /etc/svn-auth-users
   Require valid-user
&lt;/Location&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb16e964" class="outline-3">
<h3 id="orgb16e964">Create SVN users</h3>
<div class="outline-text-3" id="text-orgb16e964">
<pre class="example">
htpasswd -cm /etc/svn-auth-users testuser1

</pre>
</div>
</div>
<div id="outline-container-org690856f" class="outline-3">
<h3 id="org690856f">Create and configure SVN repository</h3>
<div class="outline-text-3" id="text-org690856f">
<pre class="example">
mkdir /var/www/unixmensvn
cd  /var/www/unixmensvn
svnadmin create repo
chown -R apache.apache repo

# If you still have issues with SELinux Security please apply this: 
chcon -R -t httpd_sys_content_t /var/www/unixmensvn/repo
chcon -R -t httpd_sys_rw_content_t /var/www/unixmensvn/repo

</pre>
</div>
</div>
<div id="outline-container-org89bff6b" class="outline-3">
<h3 id="org89bff6b">You can open the http and https on the file with thi way</h3>
<div class="outline-text-3" id="text-org89bff6b">
<pre class="example">
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --permanent --zone=public --add-service=https
firewall-cmd --reload

</pre>
</div>
</div>
<div id="outline-container-orgededc11" class="outline-3">
<h3 id="orgededc11">Make trunk, branches and tags structure under repo</h3>
<div class="outline-text-3" id="text-orgededc11">
<pre class="example">
mkdir -p /tmp/svn-structure-template/{trunk,branches,tags}

svn import -m "Initial repository" /tmp/svn-structure-template   file:///var/www/unixmensvn/repo/
Adding         /tmp/svn-structure-template/branches
Adding         /tmp/svn-structure-template/tags
Adding         /tmp/svn-structure-template/trunk

</pre>
<p>
Committed revision 1.
</p>

<p>
Done!
</p>
</div>
</div>
</div>
<div id="outline-container-org7a29370" class="outline-2">
<h2 id="org7a29370">Question</h2>
<div class="outline-text-2" id="text-org7a29370">
</div>
<div id="outline-container-org0f5b621" class="outline-3">
<h3 id="org0f5b621">问题1</h3>
<div class="outline-text-3" id="text-org0f5b621">
<pre class="example">
1.svn: Can’t open file ‘***/txn-current-lock’: Permission denied
Solve:
      Severth(Vew 7th section).

</pre>
</div>
</div>
<div id="outline-container-org9bf92fe" class="outline-3">
<h3 id="org9bf92fe">问题2</h3>
<div class="outline-text-3" id="text-org9bf92fe">
<pre class="example">
2.Happen "authorization failed" error client
Solve:
      Check configure.
### Evey establishment of a lirary need to be configured.This is very important.

</pre>
</div>
</div>
<div id="outline-container-org7812fb3" class="outline-3">
<h3 id="org7812fb3">问题3</h3>
<div class="outline-text-3" id="text-org7812fb3">
<pre class="example">
3.When committing,error:
         post commit FS processing had error:
         "sqlite:attempt to write a readonly database"
Solve:
      into /opt/svn/wp-job/db , there is a file "rep-cache.db"
chown -R zrg.zrggroup rep-cache.db

</pre>
</div>
</div>
</div>
