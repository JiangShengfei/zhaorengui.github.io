---
layout: post
title: Apache/Nginx-MySQL+PHP
author: zrg
comments: false
description: 这是我在Linux环境下的Apache/Nginx+MySQL+PHP源码包安装过程。内容适用于linux操作系统，仅供参考！
categories:
- Linux
tags:
- Apache
- Nginx
- MySQL
- PHP
photos:
---

<p>
关于此文档，如果你有任何问题，可以发邮件到我的邮箱，邮箱地址为 zrg1390556487@gmail.com.
</p>

<p>
This is a installation process of "Apache+MySQL+PHP" source packages on linux environment.It's content only  
</p>

<div id="outline-container-orgca3e483" class="outline-2">
<h2 id="orgca3e483">安装Apache</h2>
<div class="outline-text-2" id="text-orgca3e483">
</div>
<div id="outline-container-org1fcffa9" class="outline-3">
<h3 id="org1fcffa9">解压</h3>
<div class="outline-text-3" id="text-org1fcffa9">
<div class="org-src-container">
<pre class="src src-emacs">#tar jxvf httpd-2.4.18.tar.bz2
#cd httpd-2.4.18/
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e82a71" class="outline-3">
<h3 id="org1e82a71">配置</h3>
<div class="outline-text-3" id="text-org1e82a71">
<div class="org-src-container">
<pre class="src src-emacs">#./configure --prefix=/usr/local/apache2 --enable-so --with-included-apr
此时可能会出现如下错误，这是因为ARP和ARP-util缺失。
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-1.png" alt="apache-1.png" align="center" />
</p>
</div>
</div>
</div>
<div id="outline-container-orgd171f84" class="outline-3">
<h3 id="orgd171f84">安装APR和APR-util</h3>
<div class="outline-text-3" id="text-orgd171f84">
<div class="org-src-container">
<pre class="src src-emacs">到 http://apr.apache.org/download.cgi 下载apr和apr-util
#tar jxvf apr-1.5.2.tar.bz2
#cd apr-1.5.2/
#./configure --prefix=/usr/local/apr
此时，可能会出现libtool缺失，如下图所示。
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-2.png" alt="apache-2.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">解决办法：
 安装libtool、autoconf及automake：#zypper in autoconf libtool automake
 然后执行：# autoreconf --force --install
       #autoreconf --force --install
       #autoreconf --force --install
       之后，打开configure文件(现在使用的版本是apr-1.5.2，30212行)，注释   $RM -f "$cfgfile"，就是在前面添加“#”。
重新执行./configure --prefix=/usr/local/apr，问题解决。
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-3.png" alt="apache-3.png" height="600px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">编译安装apr
#make &amp;&amp; make install ，成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-4.png" alt="apache-4.png" width="800px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">接下来，安装APR-util。
同样，解压配置，注意使用了--with-apr：
#tar apr-util-1.5.4.tar.bz2
#cd apr-util-1.5.4/
# ./configure --with-apr=/usr/local/apr
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-5.png" alt="apache-5.png" height="450px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install ，成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-6.png" alt="apache-6.png" height="450px" align="center" />
</p>
</div>
</div>
</div>
<div id="outline-container-org56a1a1b" class="outline-3">
<h3 id="org56a1a1b">运行安装apache（httpd）</h3>
<div class="outline-text-3" id="text-org56a1a1b">
<div class="org-src-container">
<pre class="src src-emacs">#./configure --prefix=/usr/local/apache2 --enable-so
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-7.png" alt="apache-7.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">解决办法：到https://sourceforge.net/projects/pcre/files/ 下载pcre并安装。
#./configure --prefix=/usr/local/pcre
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-8.png" alt="apache-8.png" height="500px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install ，成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-9.png" alt="apache-9.png" width="820px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">进入apache目录，重新运行配置命令：
#./configure --prefix=/usr/local/apache2 --enable-so ，问题解决。
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-10.png" alt="apache-10.png" heght="600px" width="480px" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install ，成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-11.png" alt="apache-11.png" width="650px" align="center" />
</p>
</div>
<pre class="example">
至此，Apache安装成功

</pre>
</div>
</div>
<div id="outline-container-orga0f6c7e" class="outline-3">
<h3 id="orga0f6c7e">启动Apache</h3>
<div class="outline-text-3" id="text-orga0f6c7e">
<div class="org-src-container">
<pre class="src src-emacs">因为是源码包安装，所以只能执行下列命令：
# /usr/local/apache2/bin/apachectl start
此时，出现下图错误，这是因为ServerName配置不正确的原因。
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/apache-12.png" alt="apache-12.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">解决：# vim httpd.conf
ServerName localhost:80

改完后，重启apache：# /usr/local/apache2/bin/apachectl restart
可以查看开发端口号：# netstat -tnlp
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf4af3cd" class="outline-3">
<h3 id="orgf4af3cd">设置开机启动</h3>
<div class="outline-text-3" id="text-orgf4af3cd">
<div class="org-src-container">
<pre class="src src-emacs"># cp /usr/local/apache2/bin/apachectl /etc/init.d
# chmod 755 /etc/init.d/apachectl
# chkconfig --add apachectl                   ；add对应del
# chkconfig --level 35 apachectl on        ；on对应off
# chkconfig --list                    ；显示开机可以自动启动的服务
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgba6fa52" class="outline-2">
<h2 id="orgba6fa52">安装Nginx</h2>
<div class="outline-text-2" id="text-orgba6fa52">
</div>
<div id="outline-container-orgd5aafdc" class="outline-3">
<h3 id="orgd5aafdc">配置yum源</h3>
<div class="outline-text-3" id="text-orgd5aafdc">
<p>
CentOS：
</p>
<pre class="example">
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
gpgcheck=0
enabled=1
</pre>
</div>
</div>
<div id="outline-container-orgfefa40d" class="outline-3">
<h3 id="orgfefa40d">安装(Installing)</h3>
<div class="outline-text-3" id="text-orgfefa40d">
<pre class="example">
yum install -y nginx

</pre>

<pre class="example">
//设置nginx开机自启动
systemctl enable nginx.service

</pre>

<pre class="example">
//启动/停止/重新启动nginx
systemctl start/stop/restart nginx.service

</pre>
</div>
</div>
<div id="outline-container-org9e736dc" class="outline-3">
<h3 id="org9e736dc">打开 HTTP 和 HTTPS 防火墙端口</h3>
<div class="outline-text-3" id="text-org9e736dc">
<pre class="example">
firewall-cmd –permanent –zone=public –add-service=http
firewall-cmd –permanent –zone=public –add-service=https
firewall-cmd –reload

</pre>
</div>
</div>
<div id="outline-container-org80b05d0" class="outline-3">
<h3 id="org80b05d0">配置Nginx</h3>
<div class="outline-text-3" id="text-org80b05d0">
</div>
<div id="outline-container-org066b9c3" class="outline-4">
<h4 id="org066b9c3">/etc/nginx/conf.d/default.conf</h4>
<div class="outline-text-4" id="text-org066b9c3">
<pre class="example">
环境要求:能够正常访问网页

</pre>
<div class="org-src-container">
<pre class="src src-emacs_lisp">server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    access_log  /var/log/nginx/default.access.log  main;

    location / {
        root   /srv/www;
        index  index.php index.html index.htm;
    }

    error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /srv/www;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ \.php$ {
        root           /srv/www;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    location ~ /\.ht {
        deny  all;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org943cc38" class="outline-4">
<h4 id="org943cc38">/etc/nginx/conf.d/vhosts/finance.conf</h4>
<div class="outline-text-4" id="text-org943cc38">
<pre class="example">
环境要求：php, ThinkPHP5, pathinfo,  

</pre>
<div class="org-src-container">
<pre class="src src-emacs">server {
    listen       8080;
    server_name  localhost;

    #charset koi8-r;
    access_log  /var/log/nginx/finance.access.log  main;

    location / {
        root   /srv/www/finance/public;
        index  index.php index.html index.htm;
        if (!-e $request_filename) {
                rewrite  ^(.*)$ /index.php?s=/$1 last;
                break;
        }
    }

    error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /srv/www;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ \.php$ {
         root           /srv/www/finance/public;
         fastcgi_pass   127.0.0.1:9000;
         fastcgi_index  index.php;
         fastcgi_param  PHP_VALUE  "open_basedir=/srv/www/finance/:/tmp/:/proc/";
         fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
         include        fastcgi_params;

         set $real_script_name $fastcgi_script_name;
            if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
            set $real_script_name $1;
            set $path_info $2;
         }
         fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
         fastcgi_param SCRIPT_NAME $real_script_name;
         fastcgi_param PATH_INFO $path_info;
    }

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    location ~ /\.ht {
        deny  all;
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org991a7d4" class="outline-4">
<h4 id="org991a7d4">nginx问题解决</h4>
<div class="outline-text-4" id="text-org991a7d4">
<pre class="example">
1. 403 Forbidden
问题分析：1）检查文件或目录(/srv/www/)权限问题；2）配置检查：访问文件类型，index index.php index.html index.htm

</pre>

<pre class="example">
2.访问时，出现以下内容：
File not found. 
No input file specified.
问题分析：1）检查路径配置是否正确；2）检查php-fpm配置

</pre>

<pre class="example">
3.

</pre>
</div>
</div>
</div>
<div id="outline-container-org58b1b3c" class="outline-3">
<h3 id="org58b1b3c">参考资料</h3>
<div class="outline-text-3" id="text-org58b1b3c">
<pre class="example">
http://www.nginx.cn/231.html
https://www.nginx.com/
https://www.nginx.com/resources/wiki/start/topics/tutorials/install/

</pre>
</div>
</div>
</div>
<div id="outline-container-org838ab5a" class="outline-2">
<h2 id="org838ab5a">安装MySQL</h2>
<div class="outline-text-2" id="text-org838ab5a">
<pre class="example">
注意：这里下载的是rpm安装包。

</pre>
<div class="org-src-container">
<pre class="src src-emacs">1.rpm安装时，报如下错误，这是因为需要安装这些依赖包：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/mysql-1.png" alt="mysql-1.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">或是这样：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/mysql-2.png" alt="mysql-2.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">如果是第一个图所示错误，可以下载安装numactl，
# wget http://mirror.centos.org/centos/6/os/x86_64/Packages/numactl-2.0.9-2.el6.x86_64.rpm
# rpm -ivh numactl-2.0.9-2.el6.x86_64.rpm

如果是第二个图所示错误，可以
#rpm -ivh glibc-2.17-4.17.1.x86_64.rpm --force
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs">接着依次安装mysql附带软件：
# rpm -ivh mysql-community-libs-5.6.28-2.sles12.x86_64.rpm
# rpm -ivh mysql-community-client-5.6.28-2.sles12.x86_64.rpm
# rpm -ivh mysql-community-common-5.6.28-2.sles12.x86_64.rpm
# rpm -ivh mysql-community-server-5.6.28-2.sles12.x86_64.rpm

在此安装过程中，可能已经安装它其他版本的mysql，可以通过删除其他版本，在进行安装。
</pre>
</div>
<pre class="example">
安装完成后，可以通过 # mysql_secure_installation 命令设置root用户密码。

</pre>
</div>
<div id="outline-container-orgcd8a590" class="outline-3">
<h3 id="orgcd8a590">安装MariaDB</h3>
<div class="outline-text-3" id="text-orgcd8a590">
<pre class="example">
//非源码安装方式
yum install mariadb mariadb-server net-tools

</pre>
</div>
</div>
</div>
<div id="outline-container-org70e0851" class="outline-2">
<h2 id="org70e0851">安装PHP</h2>
<div class="outline-text-2" id="text-org70e0851">
</div>
<div id="outline-container-org6fa72a0" class="outline-3">
<h3 id="org6fa72a0">安装php扩展</h3>
<div class="outline-text-3" id="text-org6fa72a0">
</div>
<div id="outline-container-orge1602ef" class="outline-4">
<h4 id="orge1602ef">jpeg</h4>
<div class="outline-text-4" id="text-orge1602ef">
<div class="org-src-container">
<pre class="src src-emacs">官网下载地址：http://www.ijg.org/
安装时需要在安装目录jpeg下新建bin，include，lib，man/man1目录。
#tar -zvxf jpegsrc.v6b.tar.gz
#cd jpeg-6b
#CFLAGS="-O3 -fPIC" ./configure --prefix=/usr/local/jpeg6/ --enable-shared --enable-static
此时可能会报出现如下错误：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-1.png" alt="php-1.png" align="center" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">解决：复制config.guess和config.sub到安装目录下
#cp /usr/share/libtool/config/config.guess ./
#cp /usr/share/libtool/config/config.sub ./
再次执行上面的配置语句。问题解决。
使用64位函数库编译安装：
make libdir=/usr/lib64 &amp;&amp; make libdir=/usr/lib64 install
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-2.png" alt="php-2.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org1c476d6" class="outline-4">
<h4 id="org1c476d6">libpng</h4>
<div class="outline-text-4" id="text-org1c476d6">
<div class="org-src-container">
<pre class="src src-emacs">libpng无需配置
#cp scripts/makefile.std makefile
#vim makefile 
找到CFLAGS，加入-O3 -fPIC -I$(ZLIBINC)
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-3.png" alt="php-3.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install
此时，可能会出现错误，解决：先把Zlib安装了，在重新安装libpng，如果仍然报错，运行安装zlib-devel
 rpm -ivh zlib-devel-1.2.8-5.1.2.x86_64.rpm
</pre>
</div>
<p>
<img src="../../../../../assets/images/php-4.png" alt="php-4.png" />
重新编译出现下图提示信息，此时只需执行下面两个命令即可：
<img src="../../../../../assets/images/php-5.png" alt="php-5.png" />
</p>
<div class="org-src-container">
<pre class="src src-emacs">#make clean
在运行一下：
#ldconfig    #动态链接库管理命令，
</pre>
</div>
</div>
</div>
<div id="outline-container-org890640e" class="outline-4">
<h4 id="org890640e">freetype</h4>
<div class="outline-text-4" id="text-org890640e">
<div class="org-src-container">
<pre class="src src-emacs">Freetypr:http://download.savannah.gnu.org/releases/freetype/freetype-2.3.5.tar.gz
# ./configure --prefix=/usr/local/freetype
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-6.png" alt="php-6.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-7.png" alt="php-7.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org20a381a" class="outline-4">
<h4 id="org20a381a">zlib</h4>
<div class="outline-text-4" id="text-org20a381a">
<div class="org-src-container">
<pre class="src src-emacs">#./configure --prefix=/usr/local/zlib
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-8.png" alt="php-8.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">#make &amp;&amp; make install
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-9.png" alt="php-9.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org89ab6a9" class="outline-4">
<h4 id="org89ab6a9">gd</h4>
<div class="outline-text-4" id="text-org89ab6a9">
<div class="org-src-container">
<pre class="src src-emacs">CFLAGS="-O3 -fPIC" ./configure --prefix=/usr/local/gd --with-jpeg=/usr/local/jpeg 
 --with-png=/usr/local/lib --with-zlib=/usr/local/zlib --with-freetype=/usr/local/freetype
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-10.png" alt="php-10.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">编译安装：
# make &amp;&amp; make install
可能会报如下错误，检查libpng是否安装正确。
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-11.png" alt="php-11.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">安装完成标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-12.png" alt="php-12.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org5e167cb" class="outline-4">
<h4 id="org5e167cb">curl</h4>
<div class="outline-text-4" id="text-org5e167cb">
<pre class="example">
下载地址 http://curl.haxx.se/
#./configure --prefix=/usr/local/curl
#make &amp;&amp; make install ，成功标志:

</pre>

<div class="figure">
<p><img src="../../../../../assets/images/php-13.png" alt="php-13.png" />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org63fb5af" class="outline-3">
<h3 id="org63fb5af">安装php</h3>
<div class="outline-text-3" id="text-org63fb5af">
<div class="org-src-container">
<pre class="src src-emacs">#tar zxvf php-5.4.45.tar.gz
#cd php-5.4.45
#./configure --prefix=/usr/local/php --with-apxs2=/usr/local/apache2/bin/apxs --with-gd
  --with-jpeg-dir=/usr/local/jpeg6 --with-zlib-dir=/usr/local/zlib --with-png-dir=/usr/local/lib 
  --with-freetype-dir=/usr/local/freetype --with-curl=/usr/local/curl --with-mysql --with-pdo-mysql 
  --with-mysqli --enable-ftp --with-pcre-regex --with-mhash --enable-fpm --enable-mbstring
  --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --enable-zip
  此时，会报下图错误，解决办法就是安装zlib-devel，# zypper in libxml2-devel -y
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-14.png" alt="php-14.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">重新执行上面的配置命令。
出现字样"Thank you for using PHP."，表示成功了.
成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-15.png" alt="php-15.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">编译安装：# make &amp;&amp; make install ，成功标志：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-16.png" alt="php-16.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-orgc1e5074" class="outline-3">
<h3 id="orgc1e5074">检测PHP是否安装成功</h3>
<div class="outline-text-3" id="text-orgc1e5074">
<div class="org-src-container">
<pre class="src src-emacs">请检查httpd.conf文件中，下面两行代码是否已添加：
LoadModule php5_module        modules/libphp5.so
...
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
...
&lt;IfModule dir_module&gt;
DirectoryIndex index.php index.html
&lt;/IfModule&gt;

编辑完成后，重启apache： /etc/init.d/apachectl restart

创建和编辑php.ini：
#cp php.ini-development /usr/local/php/lib64/
#cd  /usr/local/php/lib64/
#cp php.ini-development php.ini
#vim php.ini
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-17.png" alt="php-17.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs">新建文件查看phpinfo是否都已加载并正常显示，
&lt;?php
phpinfo();
?&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org110dc6b" class="outline-3">
<h3 id="org110dc6b">bcmath扩展安装</h3>
<div class="outline-text-3" id="text-org110dc6b">
<div class="org-src-container">
<pre class="src src-emacs">也许这个扩展会用到。

一般情况下这个扩展在php安装的时候，是存在安装包中ext/bcmath目录下。利用phpize进行安装新的php扩展。
#cd ext/bcmath/
#/usr/local/php/bin/phpize                    ；执行(phpize的路径根据各自安装有所不同)
#find /usr/local/php/ -name php-config                ；先查找php-config在哪个地方
#./configure --with-php-config=/usr/local/php/bin/php-config          ；配置bcmath
# make
# make install
# find /usr/local/php/ -name bcmath.so            ；查看bcmath.so在那个路径下
现在配置php，制定扩展路径及加载so文件：
</pre>
</div>

<div class="figure">
<p><img src="../../../../../assets/images/php-18.png" alt="php-18.png" />
</p>
</div>
<pre class="example">
需要安装其他扩展，使用同样的操作。

</pre>
<div class="org-src-container">
<pre class="src src-emacs">特别提示1：
 可能在make的时候，会遇到错误
 错误：‘PHP_FE_END’未声明(不在函数内) -----{error: ‘PHP_FE_END’ undeclared here (not in a function)}
 解决方法： 源代码有错误，进入php-5.3.18/ext/mcrypt目录
 sed -i 's|PHP_FE_END|{NULL,NULL,NULL}|' ./*.c
 sed -i 's|ZEND_MOD_END|{NULL,NULL,NULL}|' ./*.c
 再重新make &amp;&amp; make install

特别提示2：
 openssl扩展安装，需要安装libssl-dev,
 $ sudo apt-get install libssl-dev

特别提示3：
 openssl扩展安装配置时，出现错误信息：cannot find config.m4
 解决：mv config0.m4 config.m4
</pre>
</div>
</div>
</div>
<div id="outline-container-org03a982d" class="outline-3">
<h3 id="org03a982d">php-fpm配置</h3>
<div class="outline-text-3" id="text-org03a982d">
<pre class="example">
cp /usr/local/php/etc/php-fpm.conf.default etc/php-fpm.conf
vim /usr/local/php/etc/php-fpm.conf
content:
        user=username
        group=groupname

</pre>

<pre class="example">
//开启php-fpm
/usr/local/php/sbin/php-fpm start

</pre>
</div>
</div>
</div>
<div id="outline-container-orge351f24" class="outline-2">
<h2 id="orge351f24">Memcache安装指南</h2>
<div class="outline-text-2" id="text-orge351f24">
</div>
<div id="outline-container-org5200ab2" class="outline-3">
<h3 id="org5200ab2">服务端安装</h3>
<div class="outline-text-3" id="text-org5200ab2">
<pre class="example">
//安装必须组件
$apt-get install libevent-dev
或下载libevent-dev源码安装：libevent.org or https://sourceforge.net/projects/levent/

</pre>

<pre class="example">
//下载Memcached
网址：http://memcached.org/downloads

</pre>

<pre class="example">
//安装Memcached
$tar zxvf memcached-1.5.4.tar.gz
$cd memcached-1.5.4
$./configure --prefix=/usr/local/memcached --with-libevent=/usr/local/libevent
$make &amp;&amp; make install
或通过apt-get命令直接安装：$apt-get install memcached

</pre>

<pre class="example">
//启动Memcached
$/usr/local/memcached/bin/memcached -m 64 -p 11211 -u nobody -vv -d
-d表示在后台运行
$ps aux |grep memcached

</pre>
</div>
</div>
<div id="outline-container-org6e63bcc" class="outline-3">
<h3 id="org6e63bcc">客户端安装</h3>
<div class="outline-text-3" id="text-org6e63bcc">
</div>
<div id="outline-container-org9004975" class="outline-4">
<h4 id="org9004975">第一步，安装libmemcached库</h4>
<div class="outline-text-4" id="text-org9004975">
<pre class="example">
//下载libmemcached
网址：https://launchpad.net/

</pre>

<pre class="example">
//解压安装
$tar zxvf libmemcached-1.0.18.tar.gz
$cd libmemcached-1.0.18
$./configure --prefix=/usr/local/libmemcached
#make &amp;&amp; make install

</pre>
</div>
</div>
<div id="outline-container-org066da44" class="outline-4">
<h4 id="org066da44">第二步，安装PHP memcache、memcached扩展</h4>
<div class="outline-text-4" id="text-org066da44">
<p>
### memcache 扩展
</p>
<pre class="example">
$git clone https://github.com/websupport-sk/pecl-memcache memcache
$cd memcache
$/usr/local/php7/bin/phpize
$./configure --with-php-config=/usr/local/php7/bin/php-config
#make &amp;&amp; make install
//编辑php.ini文件，加入：extension=memcache.so
//重启Apache，查看memcache扩展是否加载

</pre>
<p>
### memcached 扩展
</p>
<pre class="example">
$git clone https;//github.com/php-memcached-dev/php-memcached.git
$cd php-memcached
$git checkout php7 //进入php7分支
$/usr/local/php7/bin/phpize
$./configure --with-php-config=/usr/local/php7/bin/php-config \
--with-libmemcached-dir=/usr/local/libmemcached
--disable-memcached-sasl
//同样，编辑PHP配置文件，加入：extension=memcached.so
//重启Apache，查看memcached扩展是否加载

</pre>
</div>
</div>
</div>
<div id="outline-container-orgcbf7d27" class="outline-3">
<h3 id="orgcbf7d27">参考资料</h3>
<div class="outline-text-3" id="text-orgcbf7d27">
<pre class="example">
memcache官网：http://memcache.org/
Linux Memcached 安装：http://www.runoob.com/memcached/memcached-install.html
linux下安装PHP memcached扩展：http://www.cnblogs.com/flywind/p/6021568.html
编译安装Memcached勾结php7：https://www.jianshu.com/p/c7e59afabc28
PHP7 下安装 memcache 和 memcached 扩展：http://www.lnmp.cn/install-memcache-and-memcached-extends-under-php7.html
Linux下的Memcache安装：http://kimi.it/257.html
Memcache基础教程：http://kimi.it/259.html

</pre>
</div>
</div>
</div>
<div id="outline-container-org229a1ef" class="outline-2">
<h2 id="org229a1ef">再次声明</h2>
<div class="outline-text-2" id="text-org229a1ef">
<div class="org-src-container">
<pre class="src src-emacs">由于每台机器安装的系统并非完全一样，安装系统时自带的包有所差异，所以该指南仅供参考。关于该指南，如果你有任何问题，
你可以发邮件到我的邮箱，邮箱地址为 zrg1390556487@gmail.com
</pre>
</div>
</div>
</div>
<div id="outline-container-org8b50b9f" class="outline-2">
<h2 id="org8b50b9f">参考资料</h2>
<div class="outline-text-2" id="text-org8b50b9f">
<pre class="example">
https://xwsoul.com/posts/684

</pre>

<pre class="example">
http://php.net/
http://www.apache.org/
https://www.mysql.com/
https://mariadb.org/

</pre>
</div>
</div>
