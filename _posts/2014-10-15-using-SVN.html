---
layout: post
title: Install SVN in Linux
author: zrg
comments: false
description: I have always been fascinated website development.So,management and back up of code is very important. Last night, installed successfully SVN on linux. In fack,I have tried before,but did not write a decent note.Summarized today.
categories:
- software
tags:
- SVN
photos:
---

<div class="org-center">
<p>
If you have questions, please send email to zrg1390556487@gmail.com.
</p>
</div>

<div id="outline-container-org25aeff2" class="outline-2">
<h2 id="org25aeff2">Installation environment</h2>
<div class="outline-text-2" id="text-org25aeff2">
<pre class="example">
Linux kernel version: 3.10.0 
OS: CentOS 7
software: subversion

</pre>
</div>
</div>
<div id="outline-container-orgb71d933" class="outline-2">
<h2 id="orgb71d933">Install</h2>
<div class="outline-text-2" id="text-orgb71d933">
</div>
<div id="outline-container-org3de6b13" class="outline-3">
<h3 id="org3de6b13">First Method:source package install</h3>
<div class="outline-text-3" id="text-org3de6b13">
</div>
<div id="outline-container-org1b77824" class="outline-4">
<h4 id="org1b77824">Download and decompression</h4>
<div class="outline-text-4" id="text-org1b77824">
<pre class="example">
Official Site: https://www.visualsvn.com
Dowload:
        1. wget http://subversion.tigris.org/downloads/subversion-1.6.1.tar.gz
        2. wget http://subversion.tigris.org/downloads/subversion-deps-1.6.1.tar.gz
Decompression command:
        tar zxvf subversion-1.6.1.tar.gz
        tar zxvf subversion-deps-1.6.1.tar.gz

</pre>
</div>
</div>
<div id="outline-container-orge78c9e0" class="outline-4">
<h4 id="orge78c9e0">Compile and install</h4>
<div class="outline-text-4" id="text-orge78c9e0">
<pre class="example">
Command:
        ./configure --prefix=/usr/local/svn/
        make &amp;&amp; make install

</pre>
</div>
</div>
<div id="outline-container-orgf5f5f49" class="outline-4">
<h4 id="orgf5f5f49">Add command of svn to path</h4>
<div class="outline-text-4" id="text-orgf5f5f49">
<pre class="example">
Comand:
       echo "export PATH=$PATH:/usr/local/svn/bin/" &gt;&gt; /etc/profile
       source /etc/profile


</pre>
</div>
</div>
</div>
<div id="outline-container-org6e9d349" class="outline-3">
<h3 id="org6e9d349">Second Method:yum install</h3>
<div class="outline-text-3" id="text-org6e9d349">
<pre class="example">
yum install subversion mod_dav_svn

</pre>
</div>
</div>
</div>
<div id="outline-container-org287cd11" class="outline-2">
<h2 id="org287cd11">Build warehouse of test</h2>
<div class="outline-text-2" id="text-org287cd11">
</div>
<div id="outline-container-org4f16031" class="outline-3">
<h3 id="org4f16031">Build root directory of svn</h3>
<div class="outline-text-3" id="text-org4f16031">
<pre class="example">
mkdir -p /opt/svn

</pre>
</div>
</div>
<div id="outline-container-org8878a70" class="outline-3">
<h3 id="org8878a70">Build warehoust of test</h3>
<div class="outline-text-3" id="text-org8878a70">
<pre class="example">
mkdir -p /opt/svn/svntest/
svnadmin create /opt/svn/svntest/

</pre>
</div>
</div>
<div id="outline-container-org46ac406" class="outline-3">
<h3 id="org46ac406">Configure</h3>
<div class="outline-text-3" id="text-org46ac406">
<pre class="example">
1.To directory of configure,There are three file here.
   cd /opt/svn/svntest/conf/
authz: Configure file about setting permissions of users.
passwd:  Configure file about setting username and password.
svnserve.conf: Configure file about svn.
2.svnserve.conf
vim svnserve.conf
edit:
     [general]
     anon-access = none
     auth-access = write
     password-db = passwd
     authz-db = authz
3.authz
add:
    [svntest:/]
    92csz.com = rw # add a user(92csz.com),read and write.
4.passwd
edit:
    92csz.com = 123456 # password is 123456


</pre>
</div>
</div>
</div>
<div id="outline-container-org62f441c" class="outline-2">
<h2 id="org62f441c">Client</h2>
<div class="outline-text-2" id="text-org62f441c">
<pre class="example">
This is windows client.


</pre>
</div>
</div>
<div id="outline-container-org0ebe2bf" class="outline-2">
<h2 id="org0ebe2bf">Start</h2>
<div class="outline-text-2" id="text-org0ebe2bf">
</div>
<div id="outline-container-orgae61d5c" class="outline-3">
<h3 id="orgae61d5c">Start service of SVN</h3>
<div class="outline-text-3" id="text-orgae61d5c">
<pre class="example">
svnserve -d -r /opt/svn/

</pre>
</div>
</div>
<div id="outline-container-orgc02b40c" class="outline-3">
<h3 id="orgc02b40c">Check service</h3>
<div class="outline-text-3" id="text-orgc02b40c">
<pre class="example">
netstat -aux |grep svn
restult:
        tcp 000.0.0.0:3690.0.0.0:*  LISTEN  8646/svnserve


</pre>
</div>
</div>
</div>
<div id="outline-container-org50161fd" class="outline-2">
<h2 id="org50161fd">Change permission of user</h2>
<div class="outline-text-2" id="text-org50161fd">
<pre class="example">
Command:
        chmod -R 775 /opt/svn/
 or     chmod -R o+rw /opt/svn


</pre>
</div>
</div>
<div id="outline-container-org937c25d" class="outline-2">
<h2 id="org937c25d">Test by client</h2>
<div class="outline-text-2" id="text-org937c25d">
<pre class="example">
Open svn client(right),Enter IP address of svn server and warehouse name
exmple:
       svn://192.168.120.166/svntest


</pre>
</div>
</div>
<div id="outline-container-orgfcb6cc9" class="outline-2">
<h2 id="orgfcb6cc9">Apache and Subversion</h2>
<div class="outline-text-2" id="text-orgfcb6cc9">
</div>
<div id="outline-container-orgec2a6b9" class="outline-3">
<h3 id="orgec2a6b9">Add this config file to apache</h3>
<div class="outline-text-3" id="text-orgec2a6b9">
<div class="org-src-container">
<pre class="src src-emacs_lisp">LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

&lt;Location /svn&gt;
   DAV svn
   SVNParentPath /var/www/unixmensvn
   AuthType Basic
   AuthName "Subversion repositories"
   AuthUserFile /etc/svn-auth-users
   Require valid-user
&lt;/Location&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7a7a18b" class="outline-3">
<h3 id="org7a7a18b">Create SVN users</h3>
<div class="outline-text-3" id="text-org7a7a18b">
<pre class="example">
htpasswd -cm /etc/svn-auth-users testuser1

</pre>
</div>
</div>
<div id="outline-container-org96fbe5f" class="outline-3">
<h3 id="org96fbe5f">Create and configure SVN repository</h3>
<div class="outline-text-3" id="text-org96fbe5f">
<pre class="example">
mkdir /var/www/unixmensvn
cd  /var/www/unixmensvn
svnadmin create repo
chown -R apache.apache repo

# If you still have issues with SELinux Security please apply this: 
chcon -R -t httpd_sys_content_t /var/www/unixmensvn/repo
chcon -R -t httpd_sys_rw_content_t /var/www/unixmensvn/repo

</pre>
</div>
</div>
<div id="outline-container-orga284a1a" class="outline-3">
<h3 id="orga284a1a">You can open the http and https on the file with thi way</h3>
<div class="outline-text-3" id="text-orga284a1a">
<pre class="example">
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --permanent --zone=public --add-service=https
firewall-cmd --reload

</pre>
</div>
</div>
<div id="outline-container-org3199599" class="outline-3">
<h3 id="org3199599">Make trunk, branches and tags structure under repo</h3>
<div class="outline-text-3" id="text-org3199599">
<pre class="example">
mkdir -p /tmp/svn-structure-template/{trunk,branches,tags}

svn import -m "Initial repository" /tmp/svn-structure-template   file:///var/www/unixmensvn/repo/
Adding         /tmp/svn-structure-template/branches
Adding         /tmp/svn-structure-template/tags
Adding         /tmp/svn-structure-template/trunk

</pre>
<p>
Committed revision 1.
</p>

<p>
Done!
</p>
</div>
</div>
</div>
<div id="outline-container-org7523861" class="outline-2">
<h2 id="org7523861">Question</h2>
<div class="outline-text-2" id="text-org7523861">
</div>
<div id="outline-container-org91b7398" class="outline-3">
<h3 id="org91b7398">问题1</h3>
<div class="outline-text-3" id="text-org91b7398">
<pre class="example">
1.svn: Can’t open file ‘***/txn-current-lock’: Permission denied
Solve:
      Severth(Vew 7th section).

</pre>
</div>
</div>
<div id="outline-container-org92242a0" class="outline-3">
<h3 id="org92242a0">问题2</h3>
<div class="outline-text-3" id="text-org92242a0">
<pre class="example">
2.Happen "authorization failed" error client
Solve:
      Check configure.
### Evey establishment of a lirary need to be configured.This is very important.

</pre>
</div>
</div>
<div id="outline-container-orgff90bb3" class="outline-3">
<h3 id="orgff90bb3">问题3</h3>
<div class="outline-text-3" id="text-orgff90bb3">
<pre class="example">
3.When committing,error:
         post commit FS processing had error:
         "sqlite:attempt to write a readonly database"
Solve:
      into /opt/svn/wp-job/db , there is a file "rep-cache.db"
chown -R zrg.zrggroup rep-cache.db

</pre>
</div>
</div>
</div>
