---
layout: post
title: JavaScript 笔记
author: zrg
comments: false
description: JS 笔记
categories:
- JavaScript
tags:
- JavaScript
photos:
---

<div id="outline-container-orgbedb1f8" class="outline-2">
<h2 id="orgbedb1f8">写在前面</h2>
<div class="outline-text-2" id="text-orgbedb1f8">
<pre class="example">
这是我的javascript开发笔记代码片段，也许能够帮助到你。

</pre>
</div>
</div>
<div id="outline-container-org9afe48b" class="outline-2">
<h2 id="org9afe48b">JavaScript没有块级作用域</h2>
<div class="outline-text-2" id="text-org9afe48b">
<pre class="example">
在其他类C的语言中，由{}封闭的代码块都有自己的作用域（如果用ECMAScript的话来讲，就是它们自己的执行环境）。

</pre>
<div class="org-src-container">
<pre class="src src-emacs">if(true){
    var color="blue";
}
alert(color); //"blue"
</pre>
</div>
<pre class="example">
内容源于：《JavaScript高级程序设计》第3版 [美] Nicholas C.Zakas，p76.

</pre>
</div>
</div>
<div id="outline-container-org344e98a" class="outline-2">
<h2 id="org344e98a">字符串</h2>
<div class="outline-text-2" id="text-org344e98a">
</div>
<div id="outline-container-org1f05e54" class="outline-3">
<h3 id="org1f05e54">字符串截取</h3>
<div class="outline-text-3" id="text-org1f05e54">
</div>
<div id="outline-container-org10d7254" class="outline-4">
<h4 id="org10d7254">substring()</h4>
<div class="outline-text-4" id="text-org10d7254">
<pre class="example">
语法：stringObject.substring(start,stop)

</pre>
</div>
</div>

<div id="outline-container-orge4c6bc5" class="outline-4">
<h4 id="orge4c6bc5">substr()</h4>
<div class="outline-text-4" id="text-orge4c6bc5">
<pre class="example">
语法：stringObject.substr(start [, length ])

</pre>
</div>
</div>

<div id="outline-container-org20bbff0" class="outline-4">
<h4 id="org20bbff0">indexOf()</h4>
</div>
<div id="outline-container-org05d1f44" class="outline-4">
<h4 id="org05d1f44">split() 与 Join()</h4>
</div>
<div id="outline-container-org73142c9" class="outline-4">
<h4 id="org73142c9"></h4>
</div>
</div>
</div>
<div id="outline-container-orgff72d33" class="outline-2">
<h2 id="orgff72d33">根据网页实际大小来设置iframe显示区域大小</h2>
<div class="outline-text-2" id="text-orgff72d33">
<div class="org-src-container">
<pre class="src src-emacs-lisp">$('#iframe_i').load(<span style="color: #a020f0;">function</span> () {
 // &#8220;ref_page&#8221;&#20026;&#24341;&#29992;&#39029;&#38754;DIV&#30340;ID&#65292;&#33719;&#21462;DIV&#30340;&#22806;&#37096;&#23485;&#24230;&#12289;&#22806;&#37096;&#39640;&#24230;&#12290;
 var width = $(this).contents().find('#ref_page').outerWidth()<span style="color: #b22222;">;</span>
 var height = $(this).contents().find('#ref_page').outerHeight()<span style="color: #b22222;">;</span>
 // &#35774;&#32622;iframe&#30340;&#23485;&#24230;&#12289;&#39640;&#24230;&#12290;
 $(this).width(width)<span style="color: #b22222;">;</span>
 $(this).height(height)<span style="color: #b22222;">;</span>
)}<span style="color: #b22222;">;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7eff476" class="outline-2">
<h2 id="org7eff476">动态显示收缩列表</h2>
<div class="outline-text-2" id="text-org7eff476">
<p>
Method 1:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">$(document).ready(<span style="color: #a020f0;">function</span>(){
 //&#24403;&#28857;&#20987;&#26576;&#19968;&#21015;&#34920;&#39033;&#26102;&#65292;&#28369;&#20986;&#19979;&#32423;&#33756;&#21333;&#24182;&#25910;&#36215;&#20854;&#20182;&#21015;&#34920;&#39033;
 $(<span style="color: #8b2252;">"#user_manage"</span>).click(<span style="color: #a020f0;">function</span>(){
  // $(<span style="color: #8b2252;">"#user_about"</span>).fadeToggle()<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#user_manage"</span>).addClass(<span style="color: #8b2252;">"active"</span>)<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#node_manage"</span>).removeClass(<span style="color: #8b2252;">"active"</span>)<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#role_manage"</span>).removeClass(<span style="color: #8b2252;">"active"</span>)<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#setting"</span>).removeClass(<span style="color: #8b2252;">"active"</span>)<span style="color: #b22222;">;</span>

  $(<span style="color: #8b2252;">"#user_about"</span>).slideToggle()<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#node_about"</span>).slideUp()<span style="color: #b22222;">;</span>
  $(<span style="color: #8b2252;">"#role_about"</span>).slideUp()<span style="color: #b22222;">;</span>
     /*$(<span style="color: #8b2252;">"#div2"</span>).fadeToggle(<span style="color: #8b2252;">"slow"</span>)<span style="color: #b22222;">;</span>
         $(<span style="color: #8b2252;">"#div3"</span>).fadeToggle(3000)<span style="color: #b22222;">;</span><span style="color: #b22222;">*/</span>
 })<span style="color: #b22222;">;</span>
})<span style="color: #b22222;">;</span>
</pre>
</div>

<p>
Method 2:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">http://jqueryui.com/accordion/
</pre>
</div>
</div>
</div>
<div id="outline-container-org05bf385" class="outline-2">
<h2 id="org05bf385">点击按钮添加文本框</h2>
<div class="outline-text-2" id="text-org05bf385">
<div class="org-src-container">
<pre class="src src-emacs-lisp">&lt;div id=<span style="color: #8b2252;">"org"</span>&gt;&lt;/div&gt;
&lt;input type=<span style="color: #8b2252;">"button"</span> onclick=<span style="color: #8b2252;">"add();"</span> value=<span style="color: #8b2252;">"&#28155;&#21152;"</span> /&gt;

&lt;script type=<span style="color: #8b2252;">"text/javascript"</span>&gt;
function add(){
var input1 = document.createElement('input')<span style="color: #b22222;">;</span>
input1.setAttribute('type', 'text')<span style="color: #b22222;">;</span>
input1.setAttribute('name', 'organizers[]')<span style="color: #b22222;">;</span>
input1.setAttribute('class', 'git')<span style="color: #b22222;">;</span>

var btn1 = document.getElementById(<span style="color: #8b2252;">"org"</span>)<span style="color: #b22222;">;</span>
btn1.insertBefore(input1,null)<span style="color: #b22222;">;</span>
}
&lt;/script&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbb96620" class="outline-2">
<h2 id="orgbb96620">几个常用字段校验</h2>
<div class="outline-text-2" id="text-orgbb96620">
</div>
<div id="outline-container-orgf987825" class="outline-3">
<h3 id="orgf987825">检查用户名</h3>
<div class="outline-text-3" id="text-orgf987825">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">getFocus</span>()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#29992;&#25143;&#21517;&#25991;&#26412;&#26694;&#33719;&#21462;&#28966;&#28857;</span>
{
        document.getElementById(<span style="color: #8b2252;">"username"</span>).focus();
}
<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">checkusername</span>()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26816;&#26597;&#29992;&#25143;&#21517;</span>
{
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">username</span>=document.getElementById(<span style="color: #8b2252;">"username"</span>).value;
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">divname</span>=document.getElementById(<span style="color: #8b2252;">"divname"</span>);
        <span style="color: #a020f0;">if</span>(username==<span style="color: #8b2252;">""</span>)
        {
                divname.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#29992;&#25143;&#21517;&#19981;&#33021;&#20026;&#31354;!&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">for</span>(<span style="color: #a020f0;">var</span> <span style="color: #a0522d;">i</span>=0;i&lt;username.length;i++)
        {
                <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">text</span>=username.charAt(i);
                <span style="color: #a020f0;">if</span>(!(text&lt;=9&amp;&amp;text&gt;=0)&amp;&amp;!(text&gt;=<span style="color: #8b2252;">'a'</span>&amp;&amp;text&lt;=<span style="color: #8b2252;">'z'</span>)&amp;&amp;!(text&gt;=<span style="color: #8b2252;">'A'</span>&amp;&amp;text&lt;=<span style="color: #8b2252;">'Z'</span>)&amp;&amp;text!=<span style="color: #8b2252;">"_"</span>)
                {
                        divname.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#29992;&#25143;&#21517;&#21482;&#33021;&#26159;&#25968;&#23383;&#12289;&#23383;&#27597;&#12289;&#19979;&#21010;&#32447;&#32452;&#25104;&#65281;&lt;/font&gt;"</span>;
                        <span style="color: #a020f0;">break</span>;
                }
        }
        <span style="color: #a020f0;">if</span>(i&gt;=username.length)
        {
                divname.innerHTML=<span style="color: #8b2252;">"&lt;font color='green'&gt;&#8730;&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8dd5b1c" class="outline-3">
<h3 id="org8dd5b1c">检查密码</h3>
<div class="outline-text-3" id="text-org8dd5b1c">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">checkpassword</span>()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26816;&#26597;&#23494;&#30721; </span>
{
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">password</span>=document.getElementById(<span style="color: #8b2252;">"password"</span>).value;
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">divpassword</span>=document.getElementById(<span style="color: #8b2252;">"upassword"</span>);
        <span style="color: #a020f0;">if</span>(password==<span style="color: #8b2252;">""</span>)
        {
                divpassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#23494;&#30721;&#19981;&#33021;&#20026;&#31354;!&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span>(password.length&lt;6)
        {
                divpassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#23494;&#30721;&#33267;&#23569;&#24212;&#20026;&#20845;&#20301;!&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">else</span>
        {
                divpassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='green'&gt;&#8730;&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
        } 
}

<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">checkispwd</span>()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26816;&#26597;&#30830;&#35748;&#23494;&#30721;</span>
{
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">ispassword</span>=document.getElementById(<span style="color: #8b2252;">"ispassword"</span>).value;
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">divispassword</span>=document.getElementById(<span style="color: #8b2252;">"divispassword"</span>);
        <span style="color: #a020f0;">if</span>(ispassword==<span style="color: #8b2252;">""</span>)
        {
                divispassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#30830;&#35748;&#23494;&#30721;&#19981;&#33021;&#20026;&#31354;!&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        }
        <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span>(document.getElementById(<span style="color: #8b2252;">"password"</span>).value!=document.getElementById(<span style="color: #8b2252;">"txtpwdagin"</span>).value)
        {
                divispassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#30830;&#35748;&#23494;&#30721;&#19982;&#23494;&#30721;&#19981;&#19968;&#33268;!&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
        } 
        <span style="color: #a020f0;">else</span>
        {
                divispassword.innerHTML=<span style="color: #8b2252;">"&lt;font color='green'&gt;&#8730;&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
        } 
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org81dc7b0" class="outline-3">
<h3 id="org81dc7b0">检查电话号码</h3>
<div class="outline-text-3" id="text-org81dc7b0">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">checktelephone</span>()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26816;&#26597;&#30005;&#35805;&#21495;&#30721;</span>
{
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">telphone</span>=document.getElementById(<span style="color: #8b2252;">"telphone"</span>).value;
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">divtelphone</span>=document.getElementById(<span style="color: #8b2252;">"divtelphone"</span>);
        <span style="color: #a020f0;">if</span>(telphone!=<span style="color: #8b2252;">""</span>)
        {
                <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">reg</span> = <span style="color: #8b2252;">/^[0-9]{11}$/</span>i;
                <span style="color: #a020f0;">if</span>(!reg.test(telphone))
                {
                        divtelphone.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#21482;&#33021;&#36755;&#20837;11&#20301;&#25968;&#23383;&#65281;&#20363;&#65306;13595144582&#25110;08514785214&lt;/font&gt;"</span>;
                        <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">false</span>;
                }
                <span style="color: #a020f0;">else</span>
                {
                        divtelphone.innerHTML=<span style="color: #8b2252;">"&lt;font color='red'&gt;&#8730;&lt;/font&gt;"</span>;
                        <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
                }
        }
        <span style="color: #a020f0;">else</span>
        {
                divtelphone.innerHTML=<span style="color: #8b2252;">"&lt;font color='green'&gt;&#8730;&lt;/font&gt;"</span>;
                <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">true</span>;
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdb8738" class="outline-3">
<h3 id="orgcdb8738">检查E-mail</h3>
<div class="outline-text-3" id="text-orgcdb8738">
<p>
#+BEGIN_SRC js
function checkemail()  //检查E-mail
{
        var email=document.getElementById("email").value;
        var divemail=document.getElementById("divemail");
        if(email!="")
        {
                if(email.indexOf("@")==-1||email.indexOf(".")==-1||(email.indexOf("@")&gt;email.indexOf(".")))
                {
                        divemail.innerHTML="&lt;font color='red'&gt;E-mail格式不正确！例：jiie@163.com&lt;/font&gt;";
                        return false;
                } 
                else
                {
                        divemail.innerHTML="&lt;font color='red'&gt;√&lt;/font&gt;";
                        return true;
                }
        }
        else
        {
                divemail.innerHTML="&lt;font color='red'&gt;√&lt;/font&gt;";
                return true;
        }
}
#END_SRC
</p>
</div>
</div>

<div id="outline-container-org708fa7e" class="outline-3">
<h3 id="org708fa7e">检查QQ号码</h3>
<div class="outline-text-3" id="text-org708fa7e">
<p>
#+BEGIN_SRC emacs-lisp
function checkqq()  //检查QQ号码
{
        var qq=document.getElementById("qq").value;
        var divqq=document.getElementById("qq");
        if(qq!="")
        {
                if(qq.match(<i>\D</i>)!=null)
                {
                        divqq.innerHTML="&lt;font color='red'&gt;QQ号码只能输入数字！&lt;/font&gt;";
                        return false;
                }
                else
                {
                        divqq.innerHTML="&lt;font color='red'&gt;√&lt;/font&gt;";
                        return true;
                }
        }
        else
        {
                divqq.innerHTML="&lt;font color='green'&gt;√&lt;/font&gt;";
                return true;
        }
}
#END_SRC
</p>
</div>
</div>

<div id="outline-container-org7453117" class="outline-3">
<h3 id="org7453117">检查所有</h3>
<div class="outline-text-3" id="text-org7453117">
<div class="org-src-container">
<pre class="src src-emacs-lisp">function checkall()  //&#26816;&#26597;&#25152;&#26377;
{
        if(checkusername()<span style="color: #228b22;">&amp;&amp;checkpassword</span>()<span style="color: #228b22;">&amp;&amp;checkispwd</span>()<span style="color: #228b22;">&amp;&amp;checktelphone</span>()<span style="color: #228b22;">&amp;&amp;checkemail</span>()<span style="color: #228b22;">&amp;&amp;checkqq</span>())
        {
                return true<span style="color: #b22222;">;</span>
        }
        return false<span style="color: #b22222;">;</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org419dcd4" class="outline-3">
<h3 id="org419dcd4">复选框的选中与否是按钮的状态</h3>
<div class="outline-text-3" id="text-org419dcd4">
<div class="org-src-container">
<pre class="src src-js"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#22797;&#36873;&#26694;&#30340;&#36873;&#20013;&#19982;&#21542;&#26159;&#25353;&#38062;&#30340;&#29366;&#24577;</span>
<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">checkcjkx</span>()
{
        <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">a</span>=document.form1.btnregister;
        <span style="color: #a020f0;">if</span>(a==<span style="color: #008b8b;">null</span>)
        {
                <span style="color: #a020f0;">return</span>;
        }
        <span style="color: #a020f0;">if</span>(document.form1.ckbxcjkx!=<span style="color: #008b8b;">null</span>)
        {
                <span style="color: #a020f0;">if</span>(document.form1.ckbxcjkx.checked)
                {
                        a.disabled=<span style="color: #008b8b;">false</span>;
                        <span style="color: #a020f0;">return</span>;
                }
                <span style="color: #a020f0;">else</span>
                {
                        a.disabled=<span style="color: #008b8b;">true</span>;
                        <span style="color: #a020f0;">return</span>;
                }
        }
        <span style="color: #a020f0;">else</span>
        {
                a.disabled=<span style="color: #008b8b;">true</span>;
                <span style="color: #a020f0;">return</span>;
        }
}
</pre>
</div>
</div>
</div>
</div>
